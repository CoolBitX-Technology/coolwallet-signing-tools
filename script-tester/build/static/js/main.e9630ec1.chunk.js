(this["webpackJsonptest-web-view"]=this["webpackJsonptest-web-view"]||[]).push([[0],{186:function(e,t,n){},191:function(e,t){},193:function(e,t){},202:function(e,t){},204:function(e,t){},230:function(e,t){},231:function(e,t){},236:function(e,t){},238:function(e,t){},245:function(e,t){},264:function(e,t){},301:function(e,t){},361:function(e,t,n){},362:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(173),s=n.n(r),o=(n(185),n(186),n(3)),i=n.n(o),u=n(15),l=n(174),p=n(175),d=n(180),j=n(179),b=n(60),x=n(363),h=n(176),f=n(364),O=n(367),v=n(365),m=n(62),g=n.n(m),k=n(13),S=n(14),y=n(12),C=n(366),w=n(1),I=function(e,t,n,a){return Object(w.jsxs)(x.a,{className:"function-component",children:[Object(w.jsx)(h.a,{xs:2,children:e}),Object(w.jsx)(h.a,{className:"show-text-area",children:t}),Object(w.jsx)(h.a,{xs:2,children:Object(w.jsx)(f.a,{className:"d-flex",children:Object(w.jsx)(O.a,{disabled:a,variant:"outline-light",onClick:n,children:"Get"})})})]})},K=function(e,t,n,a,c,r,s){return Object(w.jsxs)(x.a,{className:"function-component",children:[Object(w.jsx)(h.a,{xs:2,children:e}),Object(w.jsx)(h.a,{xs:3,className:"input-col",children:Object(w.jsx)(C.a.Control,{value:c,onChange:function(e){r(e.target.value)},placeholder:s})}),Object(w.jsx)(h.a,{className:"show-text-area",children:t}),Object(w.jsx)(h.a,{xs:2,children:Object(w.jsx)(f.a,{className:"d-flex",children:Object(w.jsx)(O.a,{disabled:a,variant:"outline-light",onClick:n,children:"Send"})})})]})};var N=function(e){var t=e.transport,n=e.isLocked,c=e.setIsLocked,r=Object(a.useState)(""),s=Object(S.a)(r,2),o=(s[0],s[1]),l=Object(a.useState)(""),p=Object(S.a)(l,2),d=(p[0],p[1]),j=Object(a.useState)(""),b=Object(S.a)(j,2),x=(b[0],b[1]),h=Object(a.useState)(""),f=Object(S.a)(h,2),O=f[0],m=f[1];Object(a.useEffect)((function(){t||(d(""),x(""),o(""),m(""))}),[t]);var g=function(){var e=Object(u.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,k.apdu.general.getSEVersion(t);case 4:n=e.sent,m(n),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),m(e.t0.message),console.error(e.t0);case 12:return e.prev=12,c(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(){return e.apply(this,arguments)}}(),y=!t||n;return Object(w.jsx)(v.a,{children:I("SE Version",O,g,y)})},P=n(89);var L=function(e){var t=e.transport,n=e.appId,c=e.appPrivateKey,r=e.isLocked,s=e.setIsLocked,o=Object(a.useState)(""),l=Object(S.a)(o,2),p=l[0],d=l[1],j=Object(a.useState)(""),b=Object(S.a)(j,2),h=b[0],f=b[1],O=function(){var e=Object(u.a)(i.a.mark((function e(){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f("recovering"),s(!0),e.prev=2,a=P.mnemonicToSeedSync(p).toString("hex"),console.log("seedHex: "+a),r=localStorage.getItem("SEPublicKey"),console.log("SEPublicKey: ".concat(r)),e.next=9,k.apdu.wallet.setSeed(t,n,c,a,r);case 9:f("success"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:return e.prev=15,s(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})));return function(){return e.apply(this,arguments)}}(),m=!t||r;return Object(w.jsxs)(v.a,{children:[Object(w.jsx)(x.a,{className:"title2",children:Object(w.jsx)("p",{children:"Wallet"})}),K("Set seed",h,O,m,p,d,"data")]})},A=n(177),E=function(e,t,n,a,c,r,s,o,i,u){return Object(w.jsxs)(x.a,{className:"function-component",children:[Object(w.jsx)(h.a,{xs:2,children:e}),Object(w.jsx)(h.a,{xs:2,className:"input-col",children:Object(w.jsx)(C.a.Control,{value:c,onChange:function(e){r(e.target.value)},placeholder:s})}),"\u2002",Object(w.jsx)(h.a,{xs:2,className:"input-col",children:Object(w.jsx)(C.a.Control,{value:o,onChange:function(e){i(e.target.value)},placeholder:u})}),Object(w.jsx)(h.a,{xs:4,className:"input-col",children:Object(w.jsx)(C.a.Control,{value:t,placeholder:"Final signature",disabled:!0})}),Object(w.jsx)(h.a,{xs:1,children:Object(w.jsx)(f.a,{className:"d-flex",children:Object(w.jsx)(O.a,{disabled:a,variant:"outline-light",onClick:n,children:"Send"})})})]})},D=function(e,t,n,a,c,r,s,o,i,u,l,p,d){return Object(w.jsxs)(x.a,{className:"function-component",children:[Object(w.jsx)(h.a,{xs:2,children:e}),Object(w.jsx)(h.a,{xs:1,className:"input-col",children:Object(w.jsx)(C.a.Control,{value:c,onChange:function(e){r(e.target.value)},placeholder:s})}),Object(w.jsx)(h.a,{xs:1,className:"input-col",children:Object(w.jsx)(C.a.Control,{value:o,onChange:function(e){i(e.target.value)},placeholder:u})}),Object(w.jsx)(h.a,{xs:2,className:"input-col",children:Object(w.jsx)(C.a.Control,{value:l,onChange:function(e){p(e.target.value)},placeholder:d})}),Object(w.jsx)(h.a,{xs:4,className:"input-col",children:Object(w.jsx)(C.a.Control,{value:t,placeholder:"Final signature",disabled:!0})}),Object(w.jsx)(h.a,{xs:1,children:Object(w.jsx)(f.a,{className:"d-flex",children:Object(w.jsx)(O.a,{disabled:a,variant:"outline-light",onClick:n,children:"Send"})})})]})},F={CLA:"80",INS:"A2",P1:"00",P2:"00"},W={CLA:"80",INS:"A4",P1:"00",P2:"00"};n(89);var B=function(e){var t=e.transport,n=(e.appId,e.appPrivateKey,e.isLocked),c=e.setIsLocked,r=Object(a.useState)(""),s=Object(S.a)(r,2),o=s[0],l=s[1],p=Object(a.useState)(""),d=Object(S.a)(p,2),j=d[0],b=d[1],h=Object(a.useState)(""),f=Object(S.a)(h,2),O=f[0],m=f[1],g=Object(a.useState)([]),y=Object(S.a)(g,2),C=y[0],I=y[1],K=Object(a.useState)(""),N=Object(S.a)(K,2),P=N[0],L=N[1],B=Object(a.useState)(""),G=Object(S.a)(B,2),J=G[0],T=G[1],V=Object(a.useState)(""),H=Object(S.a)(V,2),Q=H[0],U=H[1],X="FA0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",$=function(){var e=Object(u.a)(i.a.mark((function e(){var n,a,r,s,l,p,d,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c(!0),e.prev=1,n=j+X,a=[],r=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.apdu.tx.sendScript(t,n);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.push(r),s=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z(t,o));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),!a){e.next=25;break}l=Object(A.a)(a),e.prev=9,l.s();case 11:if((p=l.n()).done){e.next=17;break}return d=p.value,e.next=15,d();case 15:e.next=11;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(9),l.e(e.t0);case 22:return e.prev=22,l.f(),e.finish(22);case 25:return e.next=27,s();case 27:b=e.sent,m(b),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(1),console.error(e.t1);case 34:return e.prev=34,c(!1),e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[1,31,34,37],[9,19,22,25]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(i.a.mark((function e(){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,console.log("utxoIntputArgument: ",C),console.log("utxoOutputArgument: ",P),n=J+X,console.log("fullSctipt: ",n),e.next=8,k.apdu.tx.sendScript(t,n);case 8:return e.next=10,z(t,P);case 10:return e.next=12,M(t,C);case 12:a=e.sent,console.log("encryptedSignatureArray: ",a),U(a),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.error(e.t0);case 20:return e.prev=20,c(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[1,17,20,23]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,c,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.apdu.execute.executeCommand(t,F,"SE",n,void 0,void 0);case 2:return a=e.sent,c=a.outputData,r=a.statusCode,s=a.msg,console.log("encryptedSignature: ",c),console.log("statusCode: ",r),console.log("msg: ",s),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,c,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.apdu.execute.executeCommand(t,W,"SE",n,"11",void 0);case 2:return a=e.sent,c=a.outputData,r=a.statusCode,s=a.msg,console.log("encryptedSignature: ",c),console.log("statusCode: ",r),console.log("msg: ",s),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=!t||n;return Object(w.jsxs)(v.a,{children:[Object(w.jsx)(x.a,{className:"title2",children:Object(w.jsx)("p",{children:"Scriptable Signing"})}),E("Signature",O,$,R,o,l,"argument",j,b,"script"),D("UTXO Signature",Q,q,R,C,I,"intput arg",P,L,"output arg",J,T,"script")]})};var G=function(e){var t=e.appPrivateKey,n=(e.appPublicKey,e.appId),a=e.transport,c=(e.setAppId,e.isLocked),r=e.setIsLocked;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(N,{transport:a,isLocked:c,setIsLocked:r}),Object(w.jsx)(L,{transport:a,appId:n,appPrivateKey:t,isLocked:c,setIsLocked:r}),Object(w.jsx)(B,{transport:a,appId:n,appPrivateKey:t,isLocked:c,setIsLocked:r})]})};var J=function(e){var t=e.appPublicKey,n=e.appPrivateKey,c=e.transport,r=e.isLocked,s=e.setIsLocked,o=Object(a.useState)(function(){var e=localStorage.getItem("appId");return null===e?console.log("No Appid stored, please register!"):console.log("get AppId success!"),e}()),i=Object(S.a)(o,2),u=i[0],l=i[1];return Object(w.jsxs)(b.a,{children:[Object(w.jsx)(y.a,{from:"/",to:"/setting"}),Object(w.jsx)(y.b,{path:"/setting/",children:Object(w.jsx)(G,{transport:c,appPrivateKey:n,appPublicKey:t,appId:u,setAppId:l,isLocked:r,setIsLocked:s}),appId:u})]})},T=(n(361),function(){var e=localStorage.getItem("appPublicKey"),t=localStorage.getItem("appPrivateKey");if(null!==e&&null!==t)return console.log("Got Keys from localStorage!"),{appPublicKey:e,appPrivateKey:t};var n=k.crypto.key.generateKeyPair();return localStorage.setItem("appPublicKey",n.publicKey),localStorage.setItem("appPrivateKey",n.privateKey),{appPublicKey:n.publicKey,appPrivateKey:n.privateKey}}()),V=T.appPublicKey,H=T.appPrivateKey,Q=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).setIsLocked=function(e){a.setState({isLocked:e})},a.connect=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.a.listen(function(){var e=Object(u.a)(i.a.mark((function e(t,n){var c,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),!n){e.next=15;break}return c=n.name,e.next=5,g.a.connect(n);case 5:return r=e.sent,e.next=8,k.config.getSEPublicKey(r);case 8:s=e.sent,a.setState({transport:r,cardName:c,SEPublicKey:s}),localStorage.setItem("cardName",c),localStorage.setItem("SEPublicKey",s),console.log("SEPublicKey: ".concat(s)),e.next=16;break;case 15:console.log(t);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),a.disconnect=function(){g.a.disconnect(a.state.transport.device.id),a.setState({transport:void 0,cardName:""})},a.state={transport:void 0,cardName:"",isLocked:!1},a}return Object(p.a)(n,[{key:"componentDidCatch",value:function(e,t){console.debug("catched error :",e)}},{key:"makeConnectComponent",value:function(e,t){return Object(w.jsxs)(x.a,{className:"function-component",children:[Object(w.jsx)(h.a,{xs:2,children:"Card Name"}),Object(w.jsx)(h.a,{className:"show-text-area",children:this.state.cardName}),Object(w.jsx)(h.a,{xs:2,children:Object(w.jsx)(f.a,{className:"d-flex",children:Object(w.jsx)(O.a,{variant:"light",onClick:t,children:e})})})]})}},{key:"render",value:function(){return Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)(b.a,{children:[Object(w.jsxs)(v.a,{children:[Object(w.jsx)(x.a,{className:"title",children:Object(w.jsx)("p",{children:"CoolWallet QA Support"})}),this.state.transport?this.makeConnectComponent("Disconnect",this.disconnect):this.makeConnectComponent("Connect",this.connect)]}),Object(w.jsx)(J,{isLocked:this.state.isLocked,setIsLocked:this.setIsLocked,transport:this.state.transport,appPrivateKey:H,appPublicKey:V})]})})}}]),n}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(w.jsx)(Q,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[362,1,2]]]);
//# sourceMappingURL=main.e9630ec1.chunk.js.map